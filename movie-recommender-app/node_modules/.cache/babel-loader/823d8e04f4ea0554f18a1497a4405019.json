{"ast":null,"code":"import _toConsumableArray from\"C:/Users/karth/OneDrive/Desktop/Git Uploads/Movies-Recommendation/movie-recommender-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/karth/OneDrive/Desktop/Git Uploads/Movies-Recommendation/movie-recommender-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import NavBar from\"./Components/NavBar\";import SearchBar from\"./Components/SearchBar\";import Footer from\"./Components/Footer\";import\"./Components/styles/HomeStyles.css\";import MovieCard from\"./Components/MovieCard\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){var api_key=process.env.REACT_APP_TMDB_API_KEY||'b97316ed479ee4226afefc88d1792909';var _useState=useState([]),_useState2=_slicedToArray(_useState,2),list=_useState2[0],setList=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),homeGenreList=_useState4[0],setHomeGenreList=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),selectedGenres=_useState6[0],setSelectedGenres=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),currMovies=_useState8[0],setCurrMovies=_useState8[1];useEffect(function(){setCurrMovies([]);setSelectedGenres([]);setHomeGenreList([]);setList([]);fetch('/api/movies').then(function(response){if(!response.ok)throw new Error('Failed to fetch movies');return response.json();}).then(function(data){setList(data.arr||[]);console.log('Movies:',data.arr);}).catch(function(error){return console.error('Error fetching movies:',error);});fetch(\"https://api.themoviedb.org/3/genre/movie/list?api_key=\".concat(api_key)).then(function(response){if(!response.ok)throw new Error('Failed to fetch genres');return response.json();}).then(function(data){setHomeGenreList(data.genres||[]);console.log('Genres:',data.genres);}).catch(function(error){return console.error('Error fetching genres:',error);});},[api_key]);useEffect(function(){setCurrMovies([]);if(selectedGenres.length>0){fetch(\"https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=\".concat(api_key,\"&release_date.lte=2019-12-12&with_genres=\").concat(encodeURI(selectedGenres.join(\",\")))).then(function(response){if(!response.ok)throw new Error('Failed to fetch movies by genre');return response.json();}).then(function(data){return setCurrMovies(data.results||[]);}).catch(function(error){return console.error('Error fetching movies by genre:',error);});}},[selectedGenres,api_key]);var onTagClick=function onTagClick(genreId){setSelectedGenres(function(prevGenres){return prevGenres.includes(genreId)?prevGenres.filter(function(id){return id!==genreId;}):[].concat(_toConsumableArray(prevGenres),[genreId]);});};var renderMovies=function renderMovies(){return currMovies.map(function(movie){if(movie&&movie.id&&movie.original_title){return/*#__PURE__*/_jsx(MovieCard,{movie:movie},\"\".concat(movie.id,\"-\").concat(movie.original_title));}return null;});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"HomePage\",children:[/*#__PURE__*/_jsx(NavBar,{isHome:false}),/*#__PURE__*/_jsx(\"div\",{className:\"HomeSearch\",children:/*#__PURE__*/_jsx(SearchBar,{movies:list,placeholder:\"Search for a Movie\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"genreHeader\",children:\"Get Top Movies Based On Genre\"}),/*#__PURE__*/_jsx(\"div\",{className:\"buttonGrid\",children:homeGenreList.map(function(genre){return/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return onTagClick(genre.id);},className:selectedGenres.includes(genre.id)?\"genreTagON\":\"genreTagOFF\",children:[genre.name,selectedGenres.includes(genre.id)&&/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-times\",\"aria-hidden\":\"true\"})]},genre.id);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid HomeMovies\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container HomeMovieGrid\",children:currMovies.length>0?renderMovies():null})}),/*#__PURE__*/_jsx(\"div\",{className:\"HomeFooter\",children:/*#__PURE__*/_jsx(Footer,{})})]});};export default Home;","map":{"version":3,"names":["NavBar","SearchBar","Footer","MovieCard","useEffect","useState","Home","api_key","process","env","REACT_APP_TMDB_API_KEY","list","setList","homeGenreList","setHomeGenreList","selectedGenres","setSelectedGenres","currMovies","setCurrMovies","fetch","then","response","ok","Error","json","data","arr","console","log","catch","error","genres","length","encodeURI","join","results","onTagClick","genreId","prevGenres","includes","filter","id","renderMovies","map","movie","original_title","genre","name"],"sources":["C:/Users/karth/OneDrive/Desktop/Git Uploads/Movies-Recommendation/movie-recommender-app/src/Pages/Home.js"],"sourcesContent":["import NavBar from \"./Components/NavBar\";\r\nimport SearchBar from \"./Components/SearchBar\";\r\nimport Footer from \"./Components/Footer\";\r\nimport \"./Components/styles/HomeStyles.css\";\r\nimport MovieCard from \"./Components/MovieCard\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nconst Home = () => {\r\n    const api_key = process.env.REACT_APP_TMDB_API_KEY || 'b97316ed479ee4226afefc88d1792909';\r\n    const [list, setList] = useState([]);\r\n    const [homeGenreList, setHomeGenreList] = useState([]);\r\n    const [selectedGenres, setSelectedGenres] = useState([]);\r\n    const [currMovies, setCurrMovies] = useState([]);\r\n\r\n    useEffect(() => {\r\n        setCurrMovies([]);\r\n        setSelectedGenres([]);\r\n        setHomeGenreList([]);\r\n        setList([]);\r\n\r\n        fetch('/api/movies')\r\n            .then((response) => {\r\n                if (!response.ok) throw new Error('Failed to fetch movies');\r\n                return response.json();\r\n            })\r\n            .then((data) => {\r\n                setList(data.arr || []);\r\n                console.log('Movies:', data.arr);\r\n            })\r\n            .catch((error) => console.error('Error fetching movies:', error));\r\n\r\n        fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${api_key}`)\r\n            .then((response) => {\r\n                if (!response.ok) throw new Error('Failed to fetch genres');\r\n                return response.json();\r\n            })\r\n            .then((data) => {\r\n                setHomeGenreList(data.genres || []);\r\n                console.log('Genres:', data.genres);\r\n            })\r\n            .catch((error) => console.error('Error fetching genres:', error));\r\n    }, [api_key]);\r\n\r\n    useEffect(() => {\r\n        setCurrMovies([]);\r\n        if (selectedGenres.length > 0) {\r\n            fetch(\r\n                `https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=${api_key}&release_date.lte=2019-12-12&with_genres=${encodeURI(selectedGenres.join(\",\"))}`\r\n            )\r\n                .then((response) => {\r\n                    if (!response.ok) throw new Error('Failed to fetch movies by genre');\r\n                    return response.json();\r\n                })\r\n                .then((data) => setCurrMovies(data.results || []))\r\n                .catch((error) => console.error('Error fetching movies by genre:', error));\r\n        }\r\n    }, [selectedGenres, api_key]);\r\n\r\n    const onTagClick = (genreId) => {\r\n        setSelectedGenres((prevGenres) =>\r\n            prevGenres.includes(genreId)\r\n                ? prevGenres.filter((id) => id !== genreId)\r\n                : [...prevGenres, genreId]\r\n        );\r\n    };\r\n\r\n    const renderMovies = () =>\r\n        currMovies.map((movie) => {\r\n            if (movie && movie.id && movie.original_title) {\r\n                return <MovieCard key={`${movie.id}-${movie.original_title}`} movie={movie} />;\r\n            }\r\n            return null;\r\n        });\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"HomePage\">\r\n                <NavBar isHome={false} />\r\n                <div className=\"HomeSearch\">\r\n                    <SearchBar movies={list} placeholder=\"Search for a Movie\" />\r\n                </div>\r\n                <h2 className=\"genreHeader\">Get Top Movies Based On Genre</h2>\r\n                <div className=\"buttonGrid\">\r\n                    {homeGenreList.map((genre) => (\r\n                        <div\r\n                            key={genre.id}\r\n                            onClick={() => onTagClick(genre.id)}\r\n                            className={selectedGenres.includes(genre.id) ? \"genreTagON\" : \"genreTagOFF\"}\r\n                        >\r\n                            {genre.name}\r\n                            {selectedGenres.includes(genre.id) && <i className=\"fa fa-times\" aria-hidden=\"true\" />}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            <div className=\"container-fluid HomeMovies\">\r\n                <div className=\"container HomeMovieGrid\">{currMovies.length > 0 ? renderMovies() : null}</div>\r\n            </div>\r\n            <div className=\"HomeFooter\">\r\n                <Footer />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Home;"],"mappings":"kWAAA,MAAOA,OAAP,KAAmB,qBAAnB,CACA,MAAOC,UAAP,KAAsB,wBAAtB,CACA,MAAOC,OAAP,KAAmB,qBAAnB,CACA,MAAO,oCAAP,CACA,MAAOC,UAAP,KAAsB,wBAAtB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,C,wFAEA,GAAMC,KAAI,CAAG,QAAPA,KAAO,EAAM,CACf,GAAMC,QAAO,CAAGC,OAAO,CAACC,GAAR,CAAYC,sBAAZ,EAAsC,kCAAtD,CACA,cAAwBL,QAAQ,CAAC,EAAD,CAAhC,wCAAOM,IAAP,eAAaC,OAAb,eACA,eAA0CP,QAAQ,CAAC,EAAD,CAAlD,yCAAOQ,aAAP,eAAsBC,gBAAtB,eACA,eAA4CT,QAAQ,CAAC,EAAD,CAApD,yCAAOU,cAAP,eAAuBC,iBAAvB,eACA,eAAoCX,QAAQ,CAAC,EAAD,CAA5C,yCAAOY,UAAP,eAAmBC,aAAnB,eAEAd,SAAS,CAAC,UAAM,CACZc,aAAa,CAAC,EAAD,CAAb,CACAF,iBAAiB,CAAC,EAAD,CAAjB,CACAF,gBAAgB,CAAC,EAAD,CAAhB,CACAF,OAAO,CAAC,EAAD,CAAP,CAEAO,KAAK,CAAC,aAAD,CAAL,CACKC,IADL,CACU,SAACC,QAAD,CAAc,CAChB,GAAI,CAACA,QAAQ,CAACC,EAAd,CAAkB,KAAM,IAAIC,MAAJ,CAAU,wBAAV,CAAN,CAClB,MAAOF,SAAQ,CAACG,IAAT,EAAP,CACH,CAJL,EAKKJ,IALL,CAKU,SAACK,IAAD,CAAU,CACZb,OAAO,CAACa,IAAI,CAACC,GAAL,EAAY,EAAb,CAAP,CACAC,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAuBH,IAAI,CAACC,GAA5B,EACH,CARL,EASKG,KATL,CASW,SAACC,KAAD,QAAWH,QAAO,CAACG,KAAR,CAAc,wBAAd,CAAwCA,KAAxC,CAAX,EATX,EAWAX,KAAK,iEAA0DZ,OAA1D,EAAL,CACKa,IADL,CACU,SAACC,QAAD,CAAc,CAChB,GAAI,CAACA,QAAQ,CAACC,EAAd,CAAkB,KAAM,IAAIC,MAAJ,CAAU,wBAAV,CAAN,CAClB,MAAOF,SAAQ,CAACG,IAAT,EAAP,CACH,CAJL,EAKKJ,IALL,CAKU,SAACK,IAAD,CAAU,CACZX,gBAAgB,CAACW,IAAI,CAACM,MAAL,EAAe,EAAhB,CAAhB,CACAJ,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAuBH,IAAI,CAACM,MAA5B,EACH,CARL,EASKF,KATL,CASW,SAACC,KAAD,QAAWH,QAAO,CAACG,KAAR,CAAc,wBAAd,CAAwCA,KAAxC,CAAX,EATX,EAUH,CA3BQ,CA2BN,CAACvB,OAAD,CA3BM,CAAT,CA6BAH,SAAS,CAAC,UAAM,CACZc,aAAa,CAAC,EAAD,CAAb,CACA,GAAIH,cAAc,CAACiB,MAAf,CAAwB,CAA5B,CAA+B,CAC3Bb,KAAK,uFAC8EZ,OAD9E,qDACiI0B,SAAS,CAAClB,cAAc,CAACmB,IAAf,CAAoB,GAApB,CAAD,CAD1I,EAAL,CAGKd,IAHL,CAGU,SAACC,QAAD,CAAc,CAChB,GAAI,CAACA,QAAQ,CAACC,EAAd,CAAkB,KAAM,IAAIC,MAAJ,CAAU,iCAAV,CAAN,CAClB,MAAOF,SAAQ,CAACG,IAAT,EAAP,CACH,CANL,EAOKJ,IAPL,CAOU,SAACK,IAAD,QAAUP,cAAa,CAACO,IAAI,CAACU,OAAL,EAAgB,EAAjB,CAAvB,EAPV,EAQKN,KARL,CAQW,SAACC,KAAD,QAAWH,QAAO,CAACG,KAAR,CAAc,iCAAd,CAAiDA,KAAjD,CAAX,EARX,EASH,CACJ,CAbQ,CAaN,CAACf,cAAD,CAAiBR,OAAjB,CAbM,CAAT,CAeA,GAAM6B,WAAU,CAAG,QAAbA,WAAa,CAACC,OAAD,CAAa,CAC5BrB,iBAAiB,CAAC,SAACsB,UAAD,QACdA,WAAU,CAACC,QAAX,CAAoBF,OAApB,EACMC,UAAU,CAACE,MAAX,CAAkB,SAACC,EAAD,QAAQA,GAAE,GAAKJ,OAAf,EAAlB,CADN,8BAEUC,UAFV,GAEsBD,OAFtB,EADc,EAAD,CAAjB,CAKH,CAND,CAQA,GAAMK,aAAY,CAAG,QAAfA,aAAe,SACjBzB,WAAU,CAAC0B,GAAX,CAAe,SAACC,KAAD,CAAW,CACtB,GAAIA,KAAK,EAAIA,KAAK,CAACH,EAAf,EAAqBG,KAAK,CAACC,cAA/B,CAA+C,CAC3C,mBAAO,KAAC,SAAD,EAAuD,KAAK,CAAED,KAA9D,YAAmBA,KAAK,CAACH,EAAzB,aAA+BG,KAAK,CAACC,cAArC,EAAP,CACH,CACD,MAAO,KAAP,CACH,CALD,CADiB,EAArB,CAQA,mBACI,aAAK,SAAS,CAAC,iBAAf,wBACI,aAAK,SAAS,CAAC,UAAf,wBACI,KAAC,MAAD,EAAQ,MAAM,CAAE,KAAhB,EADJ,cAEI,YAAK,SAAS,CAAC,YAAf,uBACI,KAAC,SAAD,EAAW,MAAM,CAAElC,IAAnB,CAAyB,WAAW,CAAC,oBAArC,EADJ,EAFJ,cAKI,WAAI,SAAS,CAAC,aAAd,2CALJ,cAMI,YAAK,SAAS,CAAC,YAAf,UACKE,aAAa,CAAC8B,GAAd,CAAkB,SAACG,KAAD,qBACf,aAEI,OAAO,CAAE,yBAAMV,WAAU,CAACU,KAAK,CAACL,EAAP,CAAhB,EAFb,CAGI,SAAS,CAAE1B,cAAc,CAACwB,QAAf,CAAwBO,KAAK,CAACL,EAA9B,EAAoC,YAApC,CAAmD,aAHlE,WAKKK,KAAK,CAACC,IALX,CAMKhC,cAAc,CAACwB,QAAf,CAAwBO,KAAK,CAACL,EAA9B,gBAAqC,UAAG,SAAS,CAAC,aAAb,CAA2B,cAAY,MAAvC,EAN1C,GACSK,KAAK,CAACL,EADf,CADe,EAAlB,CADL,EANJ,GADJ,cAoBI,YAAK,SAAS,CAAC,4BAAf,uBACI,YAAK,SAAS,CAAC,yBAAf,UAA0CxB,UAAU,CAACe,MAAX,CAAoB,CAApB,CAAwBU,YAAY,EAApC,CAAyC,IAAnF,EADJ,EApBJ,cAuBI,YAAK,SAAS,CAAC,YAAf,uBACI,KAAC,MAAD,IADJ,EAvBJ,GADJ,CA6BH,CAhGD,CAkGA,cAAepC,KAAf"},"metadata":{},"sourceType":"module"}